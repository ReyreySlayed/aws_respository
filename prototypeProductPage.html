<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products List - Prototype Page</title>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f4f4f9;
        }
        
        /* Navigation Bar Styles */
        .page-header {
            background-color: #333;
            color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .page-title {
            font-size: 1.2em;
            margin: 0;
        }
        .main-nav a {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            margin-left: 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .main-nav a:hover {
            background-color: #555;
        }
        .main-nav .active-link {
            background-color: #007bff; /* Active color for Product page */
        }

        /* Products Grid Container Styles */
        .products-grid {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* Responsive grid */
            gap: 20px;
        }

        /* Individual Product Card Styles */
        .product-card {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .product-image {
            width: 100%;
            height: 200px; /* Fixed height for image consistency */
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        .product-name {
            font-size: 1.4em;
            color: #333;
            margin-bottom: 5px;
        }
        .product-description {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
            flex-grow: 1; /* Makes description take up available space */
        }
        .product-price {
            font-size: 1.2em;
            color: #007bff;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .actions-container {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .action-button {
            padding: 8px 15px;
            font-size: 0.9em;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            flex-grow: 1;
        }
        .action-button.place-order {
            background-color: #28a745;
            color: white;
        }
        .action-button.add-to-cart {
            background-color: #ffc107;
            color: #333;
        }
        .cart-status {
            margin-top: 10px;
            color: green;
            font-size: 0.85em;
            min-height: 15px; /* Reserve space */
        }
    </style>
</head>
<body>

    <header class="page-header">
        <h1 class="page-title">Products List - Prototype Page</h1>
        <nav class="main-nav">
            <a href="#">Home</a>
            <a href="#">About us</a>
            <a href="#">Contact</a>
            <a href="product.html" class="active-link">Product</a> 
            <a href="cart.html">Cart</a> 
        </nav>
    </header>

    <div class="products-grid" id="products-list">
        </div>

    <script>
        // --- Product Data Array (10 Products) ---
        const allProducts = [
            { id: 'PROD-001', name: 'The Ultimate Widget', price: 49.99, description: 'The essential, must-have widget for all your modern needs. Sleek design and unparalleled durability.' },
            { id: 'PROD-002', name: 'Nano-Compressor V2', price: 129.50, description: 'Compress time and space with this compact, powerful device. Perfect for travelers.' },
            { id: 'PROD-003', name: 'Quantum Key Fob', price: 19.99, description: 'Secure your assets with a key fob that defies classical mechanics.' },
            { id: 'PROD-004', name: 'Holographic Projector', price: 349.00, description: 'Bring 3D images to life right on your desktop. High-resolution and easy to use.' },
            { id: 'PROD-005', name: 'Aetherial Lens', price: 89.99, description: 'See the world in a new light. Reduces glare and enhances color fidelity.' },
            { id: 'PROD-006', name: 'Modular Power Bank', price: 55.00, description: 'Never run out of charge. Expandable battery capacity for long journeys.' },
            { id: 'PROD-007', name: 'Sonic Cleaner Pro', price: 79.95, description: 'Uses high-frequency sound waves for deep, gentle cleaning of delicate items.' },
            { id: 'PROD-008', name: 'Gravity Dampener', price: 999.99, description: 'Experimental tech. Slight reduction in local gravitational pull (use with caution).' },
            { id: 'PROD-009', name: 'Ergo-Strap XL', price: 24.50, description: 'The most comfortable strap you will ever use for your gear. Fully adjustable.' },
            { id: 'PROD-010', name: 'Flux Capacitor Replica', price: 200.00, description: 'For display purposes only. Guaranteed to look cool in your garage.' }
        ];

        const productsListContainer = document.getElementById('products-list');
        const CART_STORAGE_KEY = 'prototypeCart';

        // --- Core Add to Cart Function ---
        function addToCart(product) {
            let cart = JSON.parse(localStorage.getItem(CART_STORAGE_KEY)) || [];

            // Find the product in the cart
            const existingProductIndex = cart.findIndex(item => item.id === product.id);

            if (existingProductIndex > -1) {
                // Product exists: Increase quantity
                cart[existingProductIndex].quantity += 1;
            } else {
                // Product is new: Add to cart with initial quantity of 1
                cart.push({ ...product, quantity: 1 });
            }

            // Save the updated cart
            localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));

            // Get the status element specific to this product
            const cartStatusElement = document.getElementById(`status-${product.id}`);
            const currentQty = cart[existingProductIndex > -1 ? existingProductIndex : cart.length - 1].quantity;
            
            // Provide user feedback
            cartStatusElement.textContent = `Added! Total: ${currentQty}`;

            // Clear the status message after a few seconds
            setTimeout(() => {
                cartStatusElement.textContent = '';
            }, 3000);

            console.log(`Product ${product.id} added. Current Cart:`, cart);
        }

        // --- Render Products Function ---
        function renderProducts() {
            productsListContainer.innerHTML = ''; // Clear previous content

            allProducts.forEach(product => {
                // Create the main product card element
                const card = document.createElement('div');
                card.classList.add('product-card');

                // Create the HTML structure for the card
                card.innerHTML = `
                    <h2 class="product-name">${product.name}</h2>
                    <img src="https://via.placeholder.com/280x200?text=${encodeURIComponent(product.name)}" 
                         alt="${product.name}" 
                         class="product-image">
                    
                    <p class="product-description">${product.description}</p>
                    <div class="product-price">$${product.price.toFixed(2)}</div>

                    <div class="actions-container">
                        <button class="action-button place-order" id="order-btn-${product.id}">Buy Now</button>
                        <button class="action-button add-to-cart" id="add-btn-${product.id}">Add to Cart</button>
                    </div>
                    <p class="cart-status" id="status-${product.id}"></p>
                `;

                // Add event listeners to the buttons after they are created
                card.querySelector(`#add-btn-${product.id}`).addEventListener('click', function() {
                    // Pass a simplified product object to the cart function
                    const itemToAdd = {
                        id: product.id,
                        name: product.name,
                        price: `$${product.price.toFixed(2)}` // Store price as formatted string for simplicity in this prototype
                    };
                    addToCart(itemToAdd);
                });

                card.querySelector(`#order-btn-${product.id}`).addEventListener('click', function() {
                    alert(`Placing order for one ${product.name}. Redirecting to checkout...`);
                    // For prototype: Add one item and redirect to cart.
                    const itemToAdd = {
                        id: product.id,
                        name: product.name,
                        price: `$${product.price.toFixed(2)}`
                    };
                    // Call addToCart once, then redirect. This is a simple prototype behavior.
                    addToCart(itemToAdd); 
                    window.location.href = 'cart.html'; 
                });

                // Append the complete card to the grid
                productsListContainer.appendChild(card);
            });
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', renderProducts);
    </script>
</body>
</html>